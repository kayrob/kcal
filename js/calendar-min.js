jQuery.curCSS=jQuery.css;var calendarObj,ajaxURL="undefined"!=typeof ajaxurl?ajaxurl:ajax_object.ajax_url,add_remove_event_sources=function(e,a,t){var l=ajaxURL+"?action=getCalendarsEventsAjax&calendar="+a;if("addEventSource"==e)t.addEventSource(l);else if("removeEventSource"==e){var n=t.getEventSources();if(n.length){jQuery(".kcal-fullcalendar .kcal-loading .loading-text").length&&jQuery(".kcal-fullcalendar .kcal-loading .loading-text").html(jQuery(".kcal-fullcalendar .kcal-loading").attr("data-loading"));for(var r=0;r<n.length;r++)n[r].url==l&&n[r].remove();jQuery(".kcal-fullcalendar .kcal-loading .loading-text").length&&jQuery(".kcal-fullcalendar .kcal-loading .loading-text").html(jQuery(".kcal-fullcalendar .kcal-loading").attr("data-loaded"))}}},show_event_details=function(e){var a=e.event;if(jQuery("#tr_allDay td:eq(0)","#dlgEventDetails").html("&nbsp;"),jQuery("#tr_allDay","#dlgEventDetails").hide(),jQuery("#tr_recurring td:eq(1)","#dlgEventDetails").html("&nbsp;"),jQuery("#tr_recurring","#dlgEventDetails").hide(),jQuery("#tdDateStart","#dlgEventDetails").html(a.extendedProps.displayStart),jQuery("#tdDateEnd","#dlgEventDetails").html(a.extendedProps.displayEnd),1==a.allDay&&(jQuery("#tr_allDay td:eq(0)","#dlgEventDetails").html("<em>This is an all day event</em>"),jQuery("#tr_allDay","#dlgEventDetails").show()),jQuery("#tdLocation","#dlgEventDetails").html(a.extendedProps.location),jQuery("#tdDescription","#dlgEventDetails").html('<div class="event-detail-container">'+a.extendedProps.description+"</div>"),"None"!=a.extendedProps.recurrence&&(jQuery("#tr_recurring td:eq(1)","#dlgEventDetails").html(a.extendedProps.recurrenceDescription),jQuery("#tr_recurring","#dlgEventDetails").show()),jQuery("#event-ics","#dlgEventDetails").length>=1){var t=jQuery("#event-ics").data("ics");jQuery("#event-ics","#dlgEventDetails").attr("href","/"+t+"?event="+a.publicId)}jQuery("#dlgEventDetails h2").html(a.title),jQuery("#dlgEventDetails").fadeIn()},show_front_end_events=function(e){var a,t=e.event;a=(t.allDay,t.extendedProps.displayStart+"-"+t.extendedProps.displayEnd),jQuery(".quickview-popup #event-ics").empty().hide().attr("aria-hidden",!0),jQuery(".quickview-popup .qv-recurring i").empty(),jQuery(".quickview-popup .qv-recurring").hide().attr("aria-hidden",!0),jQuery(".quickview-popup .qv-allday").hide().attr("aria-hidden",!0),jQuery(".quickview-popup h2").css({color:t.extendedProps.style.color,background:t.extendedProps.style.background}),jQuery(".quickview-popup h2 span").html(t.title).attr("class",t.extendedProps.className),jQuery(".quickview-popup tr:eq(1) td:eq(1)").html(a),jQuery(".quickview-popup tr:eq(2) td:eq(1)").html(t.extendedProps.location),!0===t.allDay&&jQuery(".quickview-popup .qv-allday").show().attr("aria-hidden",!1),"None"!=t.extendedProps.recurrence&&(jQuery(".quickview-popup .qv-recurring i").html(t.extendedProps.recurrence),jQuery(".quickview-popup .qv-recurring").show().attr("aria-hidden",!1)),t.extendedProps.imagePath&&""!=t.extendedProps.imagePath?(jQuery(".quickview-popup tr:eq(0) img").attr("src",t.extendedProps.imagePath),jQuery(".quickview-popup tr:eq(0)").show()):(jQuery(".quickview-popup tr:eq(0) img").attr("src",""),jQuery(".quickview-popup tr:eq(0)").hide()),""!=t.description?(jQuery(".quickview-popup tr:eq(3) td:eq(1)").html('<div class="qv-dxn">'+t.extendedProps.description+"</div>"),jQuery(".quickview-popup tr:eq(3)").show()):jQuery(".quickview-popup tr:eq(3)").hide(),""!=t.altUrl?(jQuery(".quickview-popup tr:eq(4) #eventMoreInfo").attr("href",t.extendedProps.altUrl),jQuery(".quickview-popup tr:eq(4)").show()):jQuery(".quickview-popup tr:eq(4)").hide(),""!=t.extendedProps.ics&&jQuery(".quickview-popup #event-ics").html(t.extendedProps.ics).attr("aria-hidden",!1).show(),jQuery(".quickview-popup .close-btn").on("click",(function(e){jQuery(".quickview-popup").fadeOut("fast",(function(){jQuery("body").removeClass("qv-open")}))})),jQuery(".quickview-popup").fadeIn("fast",(function(){jQuery(".quickview-popup a:eq(0)").focus(),jQuery("body").addClass("qv-open")}))};jQuery(document).ready((function(e){if(1==e("#calendar").length&&e("#calendar").is(":visible")){var a=document.getElementById("calendar"),t={initialDate:new Date,initialView:"dayGridMonth",editable:!1,selectable:!0,businessHours:!0,dayMaxEvents:!0,events:[],headerToolbar:{start:"title",center:"dayGridMonth,timeGridWeek,listMonth",end:"today prev,next"},views:{listMonth:{buttonText:"List"},timeGridWeek:{buttonText:"Week"},dayGridMonth:{buttonText:"Month"}},eventClick:function(e){show_front_end_events(e)},eventDidMount:function(a){e(a.el).attr("aria-label","Opens a dialog box in page").attr("role","button")},loading:function(a){a?e(".kcal-fullcalendar .kcal-loading").length&&(e(".kcal-fullcalendar .kcal-loading .loading-text").html(e(".kcal-fullcalendar .kcal-loading").attr("data-loading")),e(".kcal-fullcalendar .kcal-loading .loading-icon").show(),e(".kcal-fullcalendar .kcal-loading").removeClass("visuallyhidden")):e(".kcal-fullcalendar .kcal-loading").length&&(e(".kcal-fullcalendar .kcal-loading").hasClass("init")?e(".kcal-fullcalendar .kcal-loading").removeClass("init"):(e(".kcal-fullcalendar .kcal-loading").addClass("visuallyhidden"),e(".kcal-fullcalendar .kcal-loading .loading-text").html(e(".kcal-fullcalendar .kcal-loading").attr("data-loaded")),e(".kcal-fullcalendar .kcal-loading .loading-icon").hide(),e("#calendar .fc-view a").each((function(){e(this).hasClass("fc-col-header-cell-cushion")?e(this).attr("aria-hidden",!0).attr("tabindex","-1"):e(this).attr("role","button").attr("aria-label","Calendar date: "+e(this).html())}))))}},l="undefined"==typeof adminDefaults?t:e.extend(t,adminDefaults());calendarObj=new FullCalendar.Calendar(a,l);var n=Math.round(100*(Math.random()+Math.random()));if(e.get(ajaxURL,{action:"getCalendarsAjax",ran:n,calendar:"s"},(function(e){if("false"!=e){var a=window.location.href.split("view="),t=!!(a[1]&&parseInt(a[1],10)>=0)&&parseInt(a[1],10),l=0;for(var n in e)e.hasOwnProperty(n)&&((0==t&&0==l||t==e[n])&&(l=n),0!=t&&t!=e[n]||add_remove_event_sources("addEventSource",e[n],calendarObj));calendarObj.render()}})),window.location.href.match(/event=[0-9]{1,6}(_)?([0-9]{1,6})?&start=([0-9]{1,})/)&&1==e("#dlgEventDetails").length){var r=window.location.href.split("?");if(2==r.length){var i=r[1].split("&"),d=(i[0].substring(6),new Date(1e3*i[1].substring(6)));e("#calendar").fullCalendar("gotoDate",d),e("#dlgEventDetails").fadeIn()}}e(window).on("resize",(function(){e(this).width()<=600?calendarObj.changeView("listMonth"):calendarObj.changeView("dayGridMonth")})),e("#frm_calendar_list .calendars-list-item").length&&e("#frm_calendar_list .calendars-list-item input").on("change",(function(){var a=e(this).is(":checked")?"addEventSource":"removeEventSource";add_remove_event_sources(a,e(this).val(),calendarObj)}))}e(".quickview-popup .close-btn").on("click",(function(a){a.preventDefault(),e(this).parents(".quickview-popup").fadeOut("400",(function(){e("body").removeClass("qv-open")}))})),e(document).on("keyup",(function(a){e(".quickview-popup").is(":visible")&&(27==(a.which?a.which:a.keyCode)&&e(".quickview-popup .close-btn").trigger("click"))}))}));